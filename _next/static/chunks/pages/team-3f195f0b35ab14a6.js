(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{300:(e,a,t)=>{"use strict";t.d(a,{r:()=>l});var r=t(4232),n=t(5051),s=t(4723),i=t(7526);let l=()=>{let{instance:e,accounts:a}=(0,n.dk)(),[t,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),m=async a=>{try{var t;let r=await e.acquireTokenSilent({scopes:s.$.scopes,account:a}),n=r.idTokenClaims,i={email:(null===(t=n.emails)||void 0===t?void 0:t[0])||n.email||n.preferred_username||"",name:n.name||"".concat(n.given_name||""," ").concat(n.family_name||"").trim()||"Unknown User",idTokenClaims:n,idToken:r.idToken,accessToken:r.accessToken};l(i)}catch(a){if(a instanceof i.CB)try{await e.loginRedirect(s.$)}catch(e){h("Login required: "+e)}else h("Failed to acquire token: "+a)}};return(0,r.useEffect)(()=>{(async()=>{try{let t;await e.initialize(),await e.handleRedirectPromise()?t=e.getAllAccounts()[0]:a.length>0&&(t=a[0]),t&&await m(t)}catch(e){h("MSAL initialization error: "+e)}finally{o(!1)}})()},[e]),{userData:t,loading:c,error:d}}},378:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var r=t(7876),n=t(7328),s=t.n(n),i=t(8230),l=t.n(i),c=t(9099);let o=[{label:"Utfordringer",href:"/challenges"},{label:"Team",href:"/team"},{label:"Ledertavle",href:"/leaderboard"}],d=()=>{let e=(0,c.useRouter)();return(0,r.jsx)("div",{className:"fixed top-0 left-0 z-20 w-full bg-zinc-900 pt-safe",children:(0,r.jsx)("header",{className:"border-b bg-zinc-100 px-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,r.jsxs)("div",{className:"mx-auto flex h-20 max-w-screen-md items-center justify-between px-6",children:[(0,r.jsx)(l(),{href:"/",children:(0,r.jsx)("h1",{className:"font-medium",children:"Bouvet app"})}),(0,r.jsxs)("nav",{className:"flex items-center space-x-6",children:[(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)("div",{className:"flex items-center space-x-6",children:o.map(a=>{let{label:t,href:n}=a;return(0,r.jsx)(l(),{href:n,className:"text-sm ".concat(e.pathname===n?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:t},t)})})}),(0,r.jsx)("div",{title:"Gluten Free",onClick:()=>e.push("./profile"),className:"h-10 w-10 rounded-full bg-zinc-200 bg-cover bg-center shadow-inner dark:bg-zinc-800",style:{backgroundImage:"url(https://images.unsplash.com/photo-1612480797665-c96d261eae09?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80)"}})]})]})})})},h=()=>{let e=(0,c.useRouter)();return(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)("nav",{className:"fixed bottom-0 w-full border-t bg-zinc-100 pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,r.jsx)("div",{className:"mx-auto flex h-16 max-w-md items-center justify-around px-6",children:m.map(a=>{let{href:t,label:n,icon:s}=a;return(0,r.jsxs)(l(),{href:t,className:"flex h-full w-full flex-col items-center justify-center space-y-1 ".concat(e.pathname===t?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:[s,(0,r.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:n})]},n)})})})})},m=[{label:"Home",href:"/",icon:(0,r.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,r.jsx)("path",{d:"M7.5.5l.325-.38a.5.5 0 00-.65 0L7.5.5zm-7 6l-.325-.38L0 6.27v.23h.5zm5 8v.5a.5.5 0 00.5-.5h-.5zm4 0H9a.5.5 0 00.5.5v-.5zm5-8h.5v-.23l-.175-.15-.325.38zM1.5 15h4v-1h-4v1zm13.325-8.88l-7-6-.65.76 7 6 .65-.76zm-7.65-6l-7 6 .65.76 7-6-.65-.76zM6 14.5v-3H5v3h1zm3-3v3h1v-3H9zm.5 3.5h4v-1h-4v1zm5.5-1.5v-7h-1v7h1zm-15-7v7h1v-7H0zM7.5 10A1.5 1.5 0 019 11.5h1A2.5 2.5 0 007.5 9v1zm0-1A2.5 2.5 0 005 11.5h1A1.5 1.5 0 017.5 10V9zm6 6a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zm-12-1a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1z",fill:"currentColor"})})},{label:"Story",href:"/story",icon:(0,r.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,r.jsx)("path",{d:"M2.5.5V0H2v.5h.5zm10 0h.5V0h-.5v.5zM4.947 4.724a.5.5 0 00-.894-.448l.894.448zM2.5 8.494l-.447-.223-.146.293.21.251.383-.32zm5 5.997l-.384.32a.5.5 0 00.769 0l-.385-.32zm5-5.996l.384.32.21-.251-.146-.293-.447.224zm-1.553-4.219a.5.5 0 00-.894.448l.894-.448zM8 9.494v-.5H7v.5h1zm-.5-4.497A4.498 4.498 0 013 .5H2a5.498 5.498 0 005.5 5.497v-1zM2.5 1h10V0h-10v1zM12 .5a4.498 4.498 0 01-4.5 4.497v1c3.038 0 5.5-2.46 5.5-5.497h-1zM4.053 4.276l-2 3.995.895.448 2-3.995-.895-.448zM2.116 8.815l5 5.996.769-.64-5-5.996-.769.64zm5.768 5.996l5-5.996-.768-.64-5 5.996.769.64zm5.064-6.54l-2-3.995-.895.448 2 3.995.895-.448zM8 14.49V9.494H7v4.997h1z",fill:"currentColor"})})},{label:"Recipes",href:"/recipes",icon:(0,r.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,r.jsx)("path",{d:"M7.5 15V7m0 .5v3m0-3a4 4 0 00-4-4h-3v3a4 4 0 004 4h3m0-3h3a4 4 0 004-4v-3h-3a4 4 0 00-4 4v3zm0 0l4-4m-4 7l-4-4",stroke:"currentColor"})})}],u=e=>{let{title:a,children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[a?(0,r.jsx)(s(),{children:(0,r.jsxs)("title",{children:["Rice Bowl | ",a]})}):null,(0,r.jsx)(d,{}),(0,r.jsx)("main",{className:"mx-auto max-w-screen-md pt-20 pb-16 px-safe sm:pb-0",children:(0,r.jsx)("div",{className:"p-6",children:t})}),(0,r.jsx)(h,{})]})}},618:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team",function(){return t(2064)}])},980:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(7876);let n=e=>{let{children:a}=e;return(0,r.jsx)("section",{className:"mt-10",children:a})}},2064:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(7876),n=t(4232),s=t(378),i=t(980),l=t(300);let c=()=>{var e,a,t;let{userData:c,loading:o,error:d}=(0,l.r)(),[h,m]=(0,n.useState)([]),[u,f]=(0,n.useState)(""),[v,x]=(0,n.useState)(""),[p,w]=(0,n.useState)(null),[z,b]=(0,n.useState)(!0),j=async()=>{if(null==c?void 0:c.accessToken)try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/company",{headers:{Authorization:"Bearer ".concat(c.accessToken)}});if(e.ok){let a=await e.json();m(a)}else x("Error fetching teams.")}catch(e){console.error(e),x("Error fetching teams.")}},y=async()=>{if(!(null==c?void 0:c.accessToken))return;if(!u){x("Team name is required.");return}let e={name:u,companyId:null==p?void 0:p.companyId};try{(await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Team/upsert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken)},body:JSON.stringify(e)})).ok?(x("Team created successfully."),f(""),j()):x("Error creating team: ")}catch(e){console.error("Fetch error:",e),x("Error creating team.")}},g=async()=>{if(null==c?void 0:c.accessToken)try{let e=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(c.accessToken)}});if(!e.ok)throw Error("Error fetching user profile: ".concat(e.statusText));let a=await e.json();w(a)}catch(e){console.error("Failed to fetch user profile:",e)}finally{b(!1)}};(0,n.useEffect)(()=>{g()},[null==c?void 0:c.accessToken]);let k=async e=>{if(null==c?void 0:c.accessToken)try{(await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/join",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken)},body:JSON.stringify({email:c.email,teamId:e})})).ok?(x("Joined team successfully."),await g(),await T()):x("Error joining team.")}catch(e){console.error(e),x("Error joining team.")}},T=async()=>{if(null==c?void 0:c.accessToken)try{var e;let a=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/myteam",{headers:{Authorization:"Bearer ".concat(c.accessToken)}});if(!a.ok){x("Error fetching your team.");return}let t=await a.json();m([{teamId:t.teamId,name:t.name,companyId:null!==(e=null==p?void 0:p.companyId)&&void 0!==e?e:0,members:t.members||[]}])}catch(e){console.error(e),x("Error fetching your team.")}};(0,n.useEffect)(()=>{(null==c?void 0:c.accessToken)&&(async()=>{await g(),(null==p?void 0:p.teamId)?await T():await j()})()},[c,null==p?void 0:p.teamId]);let N=async()=>{if(null==c?void 0:c.accessToken)try{(await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/team/leave",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken)}})).ok?(x("Left the team successfully."),await g(),await j()):x("Error leaving team.")}catch(e){console.error(e),x("Error leaving team.")}};return(0,r.jsx)(s.A,{children:(0,r.jsx)(i.A,{children:z?(0,r.jsx)("p",{children:"Loading your team..."}):(null==p?void 0:p.teamId)?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{children:["Your Team: ",(0,r.jsx)("strong",{children:(null===(e=h[0])||void 0===e?void 0:e.name)||"Unknown"})]}),(0,r.jsx)("h4",{children:"Team Members:"}),(0,r.jsx)("ul",{children:null===(t=h[0])||void 0===t?void 0:null===(a=t.members)||void 0===a?void 0:a.map(e=>(0,r.jsxs)("li",{children:[e.name," (",e.email,")"]},e.userId))}),(0,r.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:N,children:"Leave Team"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Available Teams in Your Company"}),h.length>0?(0,r.jsx)("ul",{children:h.map(e=>(0,r.jsxs)("li",{className:"mb-2",children:[e.name," ",(0,r.jsx)("button",{className:"ml-4 bg-blue-500 text-white px-2 py-1 rounded",onClick:()=>k(e.teamId),children:"Join"})]},e.teamId))}):(0,r.jsx)("p",{children:"No teams available."}),(0,r.jsx)("h3",{className:"mt-6",children:"Create a New Team"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>f(e.target.value),placeholder:"Enter team name",className:"border p-2 rounded"}),(0,r.jsx)("button",{className:"ml-2 bg-green-500 text-white px-4 py-2 rounded",onClick:y,children:"Create Team"})]})})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[305,636,593,792],()=>a(618)),_N_E=e.O()}]);