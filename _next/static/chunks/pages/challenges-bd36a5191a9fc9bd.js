(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{300:(e,t,a)=>{"use strict";a.d(t,{r:()=>i});var n=a(4232),s=a(5051),l=a(4723),r=a(7526);let i=()=>{let{instance:e,accounts:t}=(0,s.dk)(),[a,i]=(0,n.useState)(null),[c,h]=(0,n.useState)(!0),[o,d]=(0,n.useState)(null),m=async t=>{try{var a;let n=await e.acquireTokenSilent({scopes:l.$.scopes,account:t}),s=n.idTokenClaims,r={email:(null===(a=s.emails)||void 0===a?void 0:a[0])||s.email||s.preferred_username||"",name:s.name||"".concat(s.given_name||""," ").concat(s.family_name||"").trim()||"Unknown User",idTokenClaims:s,idToken:n.idToken,accessToken:n.accessToken};i(r)}catch(t){if(t instanceof r.CB)try{await e.loginRedirect(l.$)}catch(e){d("Login required: "+e)}else d("Failed to acquire token: "+t)}};return(0,n.useEffect)(()=>{(async()=>{try{let a;await e.initialize(),await e.handleRedirectPromise()?a=e.getAllAccounts()[0]:t.length>0&&(a=t[0]),a&&await m(a)}catch(e){d("MSAL initialization error: "+e)}finally{h(!1)}})()},[e]),{userData:a,loading:c,error:o}}},378:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(7876),s=a(7328),l=a.n(s),r=a(8230),i=a.n(r),c=a(9099);let h=[{label:"Utfordringer",href:"/challenges"},{label:"Team",href:"/team"},{label:"Ledertavle",href:"/leaderboard"}],o=()=>{let e=(0,c.useRouter)();return(0,n.jsx)("div",{className:"fixed top-0 left-0 z-20 w-full bg-zinc-900 pt-safe",children:(0,n.jsx)("header",{className:"border-b bg-zinc-100 px-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,n.jsxs)("div",{className:"mx-auto flex h-20 max-w-screen-md items-center justify-between px-6",children:[(0,n.jsx)(i(),{href:"/",children:(0,n.jsx)("h1",{className:"font-medium",children:"Bouvet app"})}),(0,n.jsxs)("nav",{className:"flex items-center space-x-6",children:[(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsx)("div",{className:"flex items-center space-x-6",children:h.map(t=>{let{label:a,href:s}=t;return(0,n.jsx)(i(),{href:s,className:"text-sm ".concat(e.pathname===s?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:a},a)})})}),(0,n.jsx)("div",{title:"Gluten Free",onClick:()=>e.push("./profile"),className:"h-10 w-10 rounded-full bg-zinc-200 bg-cover bg-center shadow-inner dark:bg-zinc-800",style:{backgroundImage:"url(https://images.unsplash.com/photo-1612480797665-c96d261eae09?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80)"}})]})]})})})},d=()=>{let e=(0,c.useRouter)();return(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)("nav",{className:"fixed bottom-0 w-full border-t bg-zinc-100 pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,n.jsx)("div",{className:"mx-auto flex h-16 max-w-md items-center justify-around px-6",children:m.map(t=>{let{href:a,label:s,icon:l}=t;return(0,n.jsxs)(i(),{href:a,className:"flex h-full w-full flex-col items-center justify-center space-y-1 ".concat(e.pathname===a?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:[l,(0,n.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:s})]},s)})})})})},m=[{label:"Home",href:"/",icon:(0,n.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,n.jsx)("path",{d:"M7.5.5l.325-.38a.5.5 0 00-.65 0L7.5.5zm-7 6l-.325-.38L0 6.27v.23h.5zm5 8v.5a.5.5 0 00.5-.5h-.5zm4 0H9a.5.5 0 00.5.5v-.5zm5-8h.5v-.23l-.175-.15-.325.38zM1.5 15h4v-1h-4v1zm13.325-8.88l-7-6-.65.76 7 6 .65-.76zm-7.65-6l-7 6 .65.76 7-6-.65-.76zM6 14.5v-3H5v3h1zm3-3v3h1v-3H9zm.5 3.5h4v-1h-4v1zm5.5-1.5v-7h-1v7h1zm-15-7v7h1v-7H0zM7.5 10A1.5 1.5 0 019 11.5h1A2.5 2.5 0 007.5 9v1zm0-1A2.5 2.5 0 005 11.5h1A1.5 1.5 0 017.5 10V9zm6 6a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zm-12-1a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1z",fill:"currentColor"})})},{label:"Story",href:"/story",icon:(0,n.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,n.jsx)("path",{d:"M2.5.5V0H2v.5h.5zm10 0h.5V0h-.5v.5zM4.947 4.724a.5.5 0 00-.894-.448l.894.448zM2.5 8.494l-.447-.223-.146.293.21.251.383-.32zm5 5.997l-.384.32a.5.5 0 00.769 0l-.385-.32zm5-5.996l.384.32.21-.251-.146-.293-.447.224zm-1.553-4.219a.5.5 0 00-.894.448l.894-.448zM8 9.494v-.5H7v.5h1zm-.5-4.497A4.498 4.498 0 013 .5H2a5.498 5.498 0 005.5 5.497v-1zM2.5 1h10V0h-10v1zM12 .5a4.498 4.498 0 01-4.5 4.497v1c3.038 0 5.5-2.46 5.5-5.497h-1zM4.053 4.276l-2 3.995.895.448 2-3.995-.895-.448zM2.116 8.815l5 5.996.769-.64-5-5.996-.769.64zm5.768 5.996l5-5.996-.768-.64-5 5.996.769.64zm5.064-6.54l-2-3.995-.895.448 2 3.995.895-.448zM8 14.49V9.494H7v4.997h1z",fill:"currentColor"})})},{label:"Recipes",href:"/recipes",icon:(0,n.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,n.jsx)("path",{d:"M7.5 15V7m0 .5v3m0-3a4 4 0 00-4-4h-3v3a4 4 0 004 4h3m0-3h3a4 4 0 004-4v-3h-3a4 4 0 00-4 4v3zm0 0l4-4m-4 7l-4-4",stroke:"currentColor"})})}],u=e=>{let{title:t,children:a}=e;return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsx)(l(),{children:(0,n.jsxs)("title",{children:["Rice Bowl | ",t]})}):null,(0,n.jsx)(o,{}),(0,n.jsx)("main",{className:"mx-auto max-w-screen-md pt-20 pb-16 px-safe sm:pb-0",children:(0,n.jsx)("div",{className:"p-6",children:a})}),(0,n.jsx)(d,{})]})}},980:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(7876);let s=e=>{let{children:t}=e;return(0,n.jsx)("section",{className:"mt-10",children:t})}},6620:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges",function(){return a(8078)}])},8078:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(7876),s=a(4232),l=a(378),r=a(980),i=a(300);let c=e=>{let{progress:t,progressText:a=""}=e,s=Math.min(Math.max(0,t),100);return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center my-2",children:[(0,n.jsx)("div",{className:"w-full border-2 border-indigo-700 h-6 rounded-md",children:(0,n.jsx)("div",{className:"bg-indigo-500 h-full transition-all duration-250",style:{width:"".concat(s,"%")}})}),a&&(0,n.jsx)("span",{children:a})]})},h=()=>{let{userData:e}=(0,i.r)(),[t,a]=(0,s.useState)([]),[h,o]=(0,s.useState)([]),[d,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(0),p=["2025-03-13T00:00:00.000Z","2025-03-20T00:00:00.000Z","2025-03-28T00:00:00.000Z","2025-04-03T00:00:00.000Z","2025-04-10T00:00:00.000Z","2025-04-17T00:00:00.000Z","2025-04-24T00:00:00.000Z","2025-05-01T00:00:00.000Z","2025-05-08T00:00:00.000Z","2025-05-15T00:00:00.000Z","2025-05-25T00:00:00.000Z"],f=async()=>{if(!(null==e?void 0:e.accessToken))return;let t=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/user",{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!t.ok)throw Error("Error fetching user profile: ".concat(t.statusText));o(await t.json())},v=async()=>{if(!(null==e?void 0:e.accessToken))return;let t=p[u],n=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/current?testDate=".concat(t),{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!n.ok)throw Error("Error fetching user challenges: ".concat(n.statusText));a(await n.json())};(0,s.useEffect)(()=>{v(),f()},[null==e?void 0:e.accessToken]);let g=async t=>{if(!(null==e?void 0:e.accessToken))return;let a=await fetch("https://bouvetapi-frbah7fhh5cjdpfy.swedencentral-01.azurewebsites.net/api/challenge/complete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({Email:e.email,ChallengeId:t.challengeId})});a.ok?("Challenge fully completed! Points awarded."===(await a.json()).message?m("Congratulations, you've completed the challenge and earned points!"):m("Your attempt has been recorded. Keep trying to complete the challenge!"),await f()):m((await a.json()).message||"Error completing challenge.")},z=e=>{let t=h.find(t=>t.challengeId===e);return t?t.attemptCount:0};return(0,n.jsx)(l.A,{children:(0,n.jsx)(r.A,{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{onClick:()=>{x(e=>(e+1)%p.length),v()},className:"mb-4 bg-green-500 text-white px-4 py-2 rounded",children:["Next Test Date (Current: ",p[u],")"]}),(0,n.jsx)("h2",{children:"Available Challenges"}),t.map(e=>{let t=z(e.challengeId),a=t>=e.maxAttempts,s=t/e.maxAttempts*100;return(0,n.jsxs)("div",{className:"challenge-card",children:[(0,n.jsx)("p",{children:e.description}),(0,n.jsxs)("p",{children:["id: ",e.challengeId," | Points: ",e.points," | Attempts: ",t,"/",e.maxAttempts]}),(0,n.jsx)(c,{progress:s,progressText:"".concat(t," / ").concat(e.maxAttempts," attempts")}),(0,n.jsx)("button",{disabled:a,onClick:()=>g(e),children:a?"Max attempts reached":"Complete Challenge"})]},e.challengeId)}),d&&(0,n.jsx)("p",{children:d})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[305,636,593,792],()=>t(6620)),_N_E=e.O()}]);